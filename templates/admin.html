<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="images/png" href="{{ url_for('static', filename='images/logo.png') }}">
    <title>Panel Admin - Divina Revelación</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <header>
        <h2>Panel Administrativo</h2>
        <a href="{{ url_for('logout') }}">Cerrar sesión</a>
    </header>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="flashes">
          {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <form method="POST" class="form-admin" enctype="multipart/form-data">
        <label>Nombre del producto</label>
        <input type="text" name="nombre" required>

        <label>Descripción</label>
        <textarea name="descripcion" rows="3" required></textarea>

        <label>Precio</label>
        <input type="text" name="precio" required>

        <label>Selecciona imagen</label>
        <input type="file" name="imagen" accept="image/*" required>

        <button type="submit">Agregar producto</button>
    </form>

    <h3>Productos actuales:</h3>
    <ul class="lista-productos">
        {% for p in productos %}
            <li>
                <img src="{{ url_for('static', filename='images/productos/' + p.imagen) }}" width="100" alt="{{ p.nombre }}">
                <p><strong>{{ p.nombre }}</strong></p>
                <p>{{ p.descripcion }}</p>
                <p>Precio: ${{ p.precio }}</p>
                <form method="POST" style="display:inline">
                    <input type="hidden" name="delete" value="{{ loop.index0 }}">
                    <button type="submit">Eliminar</button>
                </form>
            </li>
        {% endfor %}
    </ul>
</body>
</html>